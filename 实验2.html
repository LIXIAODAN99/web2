<!DOCTYPE html>
<html>
<head>
	<title>实验2</title>
	<meta charset="utf-8">
	<script type="text/javascript">
		/*定义一个Calculator类*/
        function Calculator(){
        	this.jisuan=function(num1,num2,oper){
            	var res=0;
            	switch(oper){
                	case "+":
                    	res=num1+num2;
                    	break;
                	case "-":
                   		res=num1-num2;
                    	break;
                	case "*":
                    	res=num1*num2;
                    	break;
                	case "/":
                    	res=num1/num2;
                   		break;
                 }
            return res;
            }
        }
        //创建对象
        var calculator=new Calculator();

        //定义全局变量
        var val=0; //放置输入的值
    	var xval=0;//保存转换Number类型的值
    	var temp=0; //保存第一次输入的值    
    	var oper="";//保存输入的操作符

    	/*获取输入数字*/
    	function inputEvent(e){
    
        	val=e.value
        	var xsval=document.getElementById("inp1");        
        	xsval.value+=val; //连续输入数字(String类型)
        	//转换Number类型
        	xval=parseFloat(xsval.value);
        }

        /*获取第一行的数据*/
    	function inputPCB(e){
        	//window.alert(e.value);
        	var xsval=document.getElementById("inp1");
        	if(e.value=="C"){
            	xsval.value="";
            } 
    	}
    	/*输入操作符*/
    	function inputOper(e){

        	oper=e.value;
        	//window.alert(typeof oper);
        	//oper=oper.substr(0);
        	if (e.value=="+"){
            	var xsval=document.getElementById("inp1");
            	//保存上次计算结果，并对字符串进行转换Number类型
            	temp=parseFloat(xsval.value);
            	//第一次输入的值设置为空
            	xsval.value="";                        
        	}else if(e.value=="-"){
            	var xsval=document.getElementById("inp1");
            	temp=parseFloat(xsval.value);
            	xsval.value="";
        	}else if(e.value=="*"){
            	var xsval=document.getElementById("inp1");
            	temp=parseFloat(xsval.value);
            	xsval.value="";
        	}else if(e.value=="/"){
            	var xsval=document.getElementById("inp1");
            	temp=parseFloat(xsval.value);
            	xsval.value="";
       		}
    	}
    	/*计算结果*/
    	function inputEquel(e){

        	var xsval=document.getElementById("inp1");        
        	if(e.value=="="){
            	//window.alert(xval);
            	//调用对象方法
            	xsval.value=calculator.jisuan(temp,xval,oper);
        	}
    	}
	</script>
	<style type="text/css">
		input{
			width:60px;
		}
		tr{
			height: 70px;
		}
		td{
			text-align: center;
		}
		#inp1{
			text-align: right;
		}
	</style>
</head>
<body>
	<table border="1">
		<!--第一行结果和清除-->
		<tr><td colspan="3"><input id="inp1" type="text" value="" name="xianshi" style="height: 60px;width: 190px;"></td><td><input type="button" value="C" onclick="inputPCB(this)" style="height: 50px; width: 50px;" /></td></tr>
		<!--第一行数字-->
		<tr><td><input type="button" value="1" onclick="inputEvent(this)" style="height: 50px; width: 50px;"/></td><td><input type="button" value="2" onclick="inputEvent(this)" style="height: 50px; width: 50px;"></td><td><input type="button"value="3" onclick="inputEvent(this)"/ style="height: 50px; width: 50px;"></td><td><input type="button" value="+" onclick="inputOper(this)"/ style="height: 50px; width: 50px;"></td></tr>
		<!--第二行数字-->
		<tr><td><input type="button" value="4" onclick="inputEvent(this)"/ style="height: 50px; width: 50px;"></td><td><input type="button" value="5" onclick="inputEvent(this)" style="height: 50px; width: 50px;"></td><td><input type="button" value="6" onclick="inputEvent(this)" style="height: 50px; width: 50px;"></td><td><input type="button" value="-" onclick="inputOper(this)" style="height: 50px; width: 50px;"/></td></tr>
		<!--第三行数字-->
		<tr><td><input type="button" value="7" onclick="inputEvent(this)" style="height: 50px; width: 50px;"/></td><td><input type="button" value="8" onclick="inputEvent(this)" style="height: 50px; width: 50px;"/></td><td><input type="button" value="9" onclick="inputEvent(this)" style="height: 50px; width: 50px;"/></td><td><input type="button" value="*" onclick="inputOper(this)" style="height: 50px; width: 50px;"/></td></tr>
		<!--第四行符号-->
		<tr><td><input type="button" value="0" onclick="inputEvent(this)" style="height: 50px; width: 50px;"/></td><td><input type="button"value="." onclick="inputEvent(this)" style="height: 50px; width: 50px;"/></td><td><input type="button" value="=" onclick="inputEquel(this)" style="height: 50px; width: 50px;"/></td><td><input type="button" value="/" onclick="inputOper(this)" style="height: 50px; width: 50px;"/></td></tr>
	</table>
</body>
</html>